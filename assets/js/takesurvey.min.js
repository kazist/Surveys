jQuery(document).ready(function(){survey_form.init()});survey_form=function(){return{init:function(){survey_form.addEvents(jQuery("body"))},addEvents:function(a){a.find(".submit-survey-result").click(function(){survey_form.submitSurvey(jQuery(this))});a.find(".survey-view-result").click(function(){var b=jQuery(this).attr("survey_id");survey_form.updateSurvey(b,1)});a.find(".survey-view-form").click(function(){var b=jQuery(this).attr("survey_id");survey_form.updateSurvey(b,0)});survey_form.showCharts();return a},submitSurvey:function(b){var d=b.closest(".survey-survey").find(":input");var a=b.closest(".survey-survey").find(".survey_id").val();var c=kazist.serializeFormJSON(d);c=kazist.createNestedObject(c,["form[survey_id]"],a);kazist.callAjaxByRoute("surveys.surveys.ajaxsaveanswers",c,true);survey_form.updateSurvey(a,1)},updateSurvey:function(b,a){var d={survey_id:b,show_result:a};console.log(d);var c=kazist.callAjaxByRoute("surveys.surveys.ajaxloadresult",d,true);jQuery(".take-survey-form").replaceWith(c);survey_form.addEvents(jQuery(".take-survey-form"))},showCharts:function(){var a=jQuery(".survey-result-question");a.each(function(d){var f=jQuery(this);var b=f.attr("question_id");var g=f.attr("question_chart");var c=f.attr("question_title");var e=window["survey_result_question_"+b];console.log(c);kazist.loadChart(f,g,c,"Result",e)})}}}();